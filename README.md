# Vite plugin: Module list

ðŸ§¶ Vite plugin that writes a module that dynamically imports modules found in a folder.

### Key features

- Write a simple JavaScript module that dynamically imports all modules of a specified folder.
- Automatically updates when files are added, removed, or renamed to the specified folder.
- Optionally formats the written module using Prettier.

## Installation

```bash
npm install vite-plugin-module-list
```

## Import

```js
import moduleList from "vite-plugin-module-list";
```

## API

[API documentation](./doc/README.md).

The default exported function returns a regular Vite plugin object.

```js
import { resolve } from "path";
import moduleList from "vite-plugin-module-list";

export default defineConfig({
  plugins: [
    moduleList({
      rootPath: resolve("src/pages"),
      outputPath: resolve("src/pages.ts"),
      formatOptions: {
        trailingComma: "all",
      },
    }),
  ],
});
```

## Example

With the example configuration above, and the `main.ts` will be generated:

```diff
src/
+ pages.ts
  pages/
    A.tsx
    B.tsx
    C.tsx
```

It will contain:

```js
// File automatically generated by `vite-plugin-module-list`
export default [
  { path: "A.tsx", module: () => import("./pages/A.tsx") },
  { path: "B.tsx", module: () => import("./pages/B.tsx") },
  { path: "C.tsx", module: () => import("./pages/C.tsx") },
];
```

It can then be imported in another module that wraps the dynamic imports with a `lazy` decorator:

```jsx
import MODULE_LIST from "./pages";

const PAGE_LIST = MODULE_LIST.map(({ path, module }) => {
  const name = path.slice(0, -4);
  return {
    path: `/${name.toLowerCase()}`,
    name,
    Page: lazy(module),
  };
});
```
